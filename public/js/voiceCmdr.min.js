var voiceCmdr=function(){"use strict";var n={};return n.recognition=window.webkitSpeechRecognition&&new webkitSpeechRecognition,n.isSupported=function(){return!!n.recognition},n.isSupported()&&(n.addCommand=function(o,e){n.DEBUG&&console.debug("added command:",o),n.commands[o]=e},n.removeCommand=function(o){return n.DEBUG&&console.debug("removed command:",o),n.commands[o]?(delete n.commands[o],!0):!1},n.start=function(){n.recognition.continuous=!0,n.recognition.start(),n.DEBUG&&console.debug("started listening")},n.stop=function(){n.recognition.continuous=!1,n.recognition.stop(),n.DEBUG&&console.debug("stopped listening")},n.getCommand=function(){var o=1;n.isRecognizing()&&(n.stop(),o=1e3),setTimeout(function(){n.recognition.continuous=!1,n.recognition.start(),n.DEBUG&&console.debug("listening for single command")},o)},n.debug=function(o){n.DEBUG=!!o},n.finalTranscript="",n.commands={},n.DEBUG=!1,n.recognizing=!1,n.isRecognizing=function(){return n.recognizing},n.recognition.onstart=function(){n.recognizing=!0,n.DEBUG&&console.debug("start",event)},n.recognition.onresult=function(o){if("undefined"==typeof o.results)return n.DEBUG&&console.debug("undefined result"),void n.recognition.stop();for(var e=o.resultIndex;e<o.results.length;++e)o.results[e].isFinal&&(n.finalTranscript+=o.results[e][0].transcript);if(""!==n.finalTranscript){n.finalTranscript=n.finalTranscript.toLowerCase().trim(),n.DEBUG&&console.debug("received command:",n.finalTranscript);for(var i in n.commands)if(0===n.finalTranscript.indexOf(i))if(void 0===n.finalTranscript[i.length])n.DEBUG&&console.debug("calling command",i),n.commands[i]();else if(" "===n.finalTranscript[i.length]){var t=n.finalTranscript.substring(i.length,n.finalTranscript.length).trim();n.DEBUG&&console.debug("calling command",i,"with param:",t),n.commands[i](t)}n.finalTranscript=""}else n.DEBUG&&console.debug("received empty command")},n.recognition.onerror=function(o){n.DEBUG&&console.debug("error occured",o)},n.recognition.onend=function(o){n.recognizing=!1,n.DEBUG&&console.debug("end",o),n.recognition.continuous&&(n.DEBUG&&console.debug("restarting",n.recognition.continuous),n.recognition.start())}),{isSupported:n.isSupported,addCommand:n.addCommand,removeCommand:n.removeCommand,start:n.start,stop:n.stop,getCommand:n.getCommand,debug:n.debug,isRecognizing:n.isRecognizing}}();